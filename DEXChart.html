<!DOCTYPE html>

<!-- Head -->

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=yes">
    <meta name="description" content="">
    <meta name="author" content="">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Operations Metric Platform</title>
  <link rel="stylesheet" type="text/css" href="DEXChart.css"/>
  <link href="https://fonts.googleapis.com/css?family=Cousine" rel="stylesheet">
  <script defer src="https://use.fontawesome.com/releases/v5.0.8/js/all.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
  <script src="DEXChart.js"></script>
</head>

<!-- Body -->

<body>

<!-- Navbar -->

<div class="nav-container">
  <div class="top-navbar">
    <div class="title-container">
      <h3>Delivery Exceptions</h3>
    </div>
    <div class="icon">
      <a href="index.html"><img src='images/Back.svg' width=40 style="filter: brightness(170%);"></a>
    </div>
  </div>
</div>

<!-- Content Body -->

<div>
  <div id="switch-container">
	<table>
		<tr>
			<td class="chosen" id="chooseChart" onclick="showChartView()"><a> Chart View </a></td>
			<td class="notChosen" id="chooseMap" onclick="showMapView()"><a> Map View </a></td>
		</tr>
	</table>
  </div>
  
  <div id="chart-container">
	
	<div id="tierNames"	class="chartTierNames">
	</div>
	
	<div id="chart">
	</div>
	
	<div id="map" style="display:none">
		<canvas id="mapCanvas"></canvas>
	</div>
  </div>
</div>

<!-- Footer -->
<div style="height:10vh">
	<style media="screen" type="text/css">
		.dropup .dropdown-menu {
			top: auto;
			bottom: 100%;
			right: -100%;
			margin-bottom: .125rem;
			max-height: 80vh;
			overflow-y: auto;
		}
		
		.selectWrapper {
			width: 100%;
			height: 5vh;
			overflow: hidden;
			position: relative;
			border: 1px solid #bbb;
			border-radius: 2px;
			background:#FFFFFF url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2211%22%20height%3D%2211%22%20viewBox%3D%220%200%2011%2011%22%3E%3Cpath%20d%3D%22M4.33%208.5L0%201L8.66%201z%22%20fill%3D%22%2300AEA9%22%2F%3E%3C%2Fsvg%3E') right 13px center no-repeat;
		}

		.selectWrapper select {
				padding: 1vh 40px 0px 20px;
				font-size: 3vh;
				line-height: 18px;
				width: 100%;
				border: none;
				box-shadow: none;
				background: transparent;
				background-image: none;
				-webkit-appearance: none;
				outline: none;
				cursor: pointer;
				-moz-appearance: none;
				text-indent: 0.01px;
				text-overflow: ellipsis;
			}
    </style>
	
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.9/css/all.css" integrity="sha384-5SOiIsAziJl6AWe0HWRKTXlfcSHKmYV4RBF18PPJ173Kzn7jzMyFuTtk8JA7QQG1" crossorigin="anonymous">

    <!-- Bootstrap core CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  
	<script>
	function allowDrop(ev) {
		ev.preventDefault();
	}

	function drag(ev) {
		ev.dataTransfer.setData("text", ev.target.id);
	}

	function drop(ev) {
		ev.preventDefault();
		var data = ev.dataTransfer.getData("text");
		var newTierDiv = ev.target;
		

		if (Object.keys(tiers).indexOf(newTierDiv.id) < 0)
			newTierDiv = newTierDiv.parentElement;
			
		newTierDiv.appendChild(document.getElementById(data));
		
		var newTier = newTierDiv.id;
		for(var tier in tiers) {
			if (tier == newTier) {
				if (tiers[tier].indexOf(data) < 0) {
					tiers[tier].push(data);
				} 
				continue;
			}
			for (var i in tiers[tier]) {
				if(tiers[tier][i] == data) {
					tiers[tier].splice(i, 1);
				}
			}
		}
		
		if (document.getElementById("chooseChart").className == "chosen")
			showChart();
		else
			showMap();
	}
	</script>

	<nav class="navbar navbar-inverse bg-inverse fixed-bottom navbar-expand-sm dropup" style="background-color:#4B1388;">
		<div class="container" style="min-width: 100%">
			<div class="row" style="min-width: 100%">
				<div class="col" style="min-width: 33%; text-align: center">
					
					<div class="btn-group dropup btn-group-sm">
						<button type="button" class="btn dropdown-toggle" aria-expanded="false" aria-haspopup="true" data-toggle="dropdown"
								 style="background-color:#4B1388; color:#fff; border:none">
							<i class="far fa-compass" style="font-size: 3em; color: white"></i>
						</button>
						<div id="drill-down" class="dropdown-menu text-left" style="width: 70vw; max-width: 300px; background-color: #f9f9f9; padding:10px">
						</div>
					</div>
				</div>
				<div class="col" style="min-width: 33%; text-align: center">
					<div class="btn-group dropup btn-group-sm">
						<button type="button" class="btn dropdown-toggle" aria-expanded="false" aria-haspopup="true" data-toggle="dropdown"
								 style="background-color:#4B1388; color:#fff; border:none">
							<i class="far fa-clock" style="font-size: 3em; color: white"></i>
						</button>
						<div class="dropdown-menu text-left" style="width: 70vw; max-width: 300px; background-color: #f9f9f9; left:-100%; right:0%; padding: 10px;">
							<label style="font-size:3vmin">Start Time & Date:</label>
							<br/>
							<form>
								<div style="padding:2px">
									<input id="sdate" type="date">
								</div>
								<div style="padding:2px">
									<input id="stime" type="time" value="01:00:00">
									<label>(CST)</label>
								</div>
							</form>
							<br/>

							<label style="font-size:3vmin">End Time & Date:</label>
							<br/>
							<form>
								<div style="padding:2px">
									<input id="edate" type="date">
								</div>
								<div style="padding:2px">
									<input id="etime" type="time" value="00:00:00">
									<label>(CST)</label>
								</div>
							</form>
						</div>
					</div>
				</div>
				<div class="col" style="min-width: 33%; text-align: center">
					<div class="btn-group dropup btn-group-sm">
						<button type="button" class="btn dropdown-toggle" aria-expanded="false" aria-haspopup="true" data-toggle="dropdown"
								 style="background-color:#4B1388; color:#fff; border:none">
							<i class="fas fa-user" style="font-size: 3em; color: white"></i></a>
						</button>
						<div class="dropdown-menu text-left scroll-menu" style="width: 70vw; max-width: 300px; background-color: #f9f9f9; left:-200%; right:0%; padding: 10px;">
							<!-- Drag and Drop Tiers -->
							<label style="font-size:3vmin">Default Drilldown:</label>
							<br/>
							<div id="default-drill-down">
							</div>
							
							<label style="font-size:3vmin">Default Date Range:</label>
							<br/>
<div style="display:inline-flex;align-items:center">
							<input type="radio" name="default-date" checked></input>
							<div class="container">
							<label style="font-size:2vmin; display:inline-flex;padding-top:1vmin; align-items:center" >Last <input type="number" value="24" style="width:4vw;margin-left: 1vmin; margin-right:2vmin;">
							Hours
							</label>
							</div>
							</div>
							
							<div style="display:inline-flex;align-items:center;margin-top:1vmin">
							<input type="radio" name="default-date"></input>
							<div class="container">
								<div class="row" style="width: 100%">
									<div class="col-4"><label style="font-size:1.5vmin;min-width:7vw;">Start Date:</label></div>
									<div class="col-8">
										<input id="sddate" type="date" style="font-size:2vmin" value=></input>
									</div>
								</div>
								<div class="row" style="width: 100%">
									<div class="col-4"><label style="font-size:1.5vmin;min-width:7vw;">Start Time:</label></div>
									<div class="col-8">
										<input id="sdtime" type="time" value="01:00:00" style="font-size:2vmin"></input>
									</div>
								</div>
							</div>
							</div>
						
							<br/>
							<label style="font-size:3vmin">Critical:</label>
							<div id="Critical" ondrop="drop(event)" ondragover="allowDrop(event)" style="min-width:18vw; min-height:10vh; border: 2px solid; margin: 3px">
							</div>
							<label style="font-size:3vmin">High Priority:</label>
							<div id="High Priority" ondrop="drop(event)" ondragover="allowDrop(event)" style="min-width:18vw; min-height:10vh; border: 2px solid; margin: 3px">
							</div>
							<label style="font-size:3vmin">Meduim Priority:</label>
							<div id="Medium Priority" ondrop="drop(event)" ondragover="allowDrop(event)" style="min-width:18vw; min-height:10vh; border: 2px solid; margin: 3px">
							</div>
							<label style="font-size:3vmin">Low Priority:</label>
							<div id="Low Priority" ondrop="drop(event)" ondragover="allowDrop(event)" style="min-width:18vw; min-height:10vh; border: 2px solid; margin: 3px">
							<div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</nav>
	<script src="menu.js"></script>
  
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
  <script>
	$('.dropdown-menu').on('click', function(event) {
		event.stopPropagation();
	});
	
	$('.dropdown-menu').on('change', function(event) {
	    animationDuration = 1000;
		if(event.originalEvent.path[0].id == "edate" || event.originalEvent.path[0].id == "etime") liveData = false;
		handleDateChange();
		
		updateDefaultDrillDown();
		updateDrillDown();
		if (document.getElementById("chooseChart").className == "chosen")
			showChart();
		else
			showMap();
	});

	$('body').on('click', function(event) {
		var target = $(event.target);
		if (target.parents('.bootstrap-select').length) {
			event.stopPropagation();
			$('.bootstrap-select.open').removeClass('open');
		}
	});	
	
  </script>
</div>
</body>